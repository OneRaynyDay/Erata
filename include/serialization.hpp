TODO: implement to_json for the different types.